<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <script>
            var workshops = {
                all: {
                    title: "Past workshops",
                    paid_img: 'https://i3.ytimg.com/vi/xnkgvaCgLTQ/hqdefault.jpg',
                    free_img: 'https://i.ibb.co/H40tNZB/arms-raised.png',
                    paid_url: 'https://shopstr.store/listing/90dbbcd048d95f7ef4ea0b8d099491983831a92f17aa3b72eee0b49cbcf5f851',
                    free_url: 'https://www.youtube.com/playlist?list=PLP7B5SmUZUT9H1pcQxEZkCqOQ08WPsBsd',
                    price: 20,
                    html_desc: `
                        <p>Purchase my workshops and I will send you a link to an unlisted youtube playlist containing a set of workshops where you will learn to write code for bitcoin projects by doing build-alongs with me. The playlist includes the following workshops:</p>
                        <ul>
                            <li>Bitcoin script (make your first bitcoin smart contract)</li>
                            <li>Nostr (build your first nostr client)</li>
                            <li>Cashu workshop (write a basic cashu wallet)</li>
                            <li>Bisq (how to use it to buy bitcoin without KYC)</li>
                            <li>Bitvm (build tit tac toe in bitvm)</li>
                            <li>Lnbits (get it running and use its api)</li>
                            <li>Coinjoin (build your own coinjoin software)</li>
                        </ul>
                    `,
                },
                bitcoin_script: {
                    title: "Bitcoin script workshop",
                    paid_img: 'https://i3.ytimg.com/vi/xnkgvaCgLTQ/hqdefault.jpg',
                    free_img: 'https://i.ibb.co/H40tNZB/arms-raised.png',
                    paid_url: 'https://shopstr.store/listing/af9cf6815f7c85ec701ece9b675afa582bbcd80dcd45eaeae990acaf20579aec',
                    free_url: 'https://www.youtube.com/watch?v=cHLXK5HjCVg',
                    price: 5,
                    html_desc: `
                        <p>Learn how bitcoin script works and write your first bitcoin smart contract: a ballgame contract where Alice and Bob send one another a conditional payment that only goes through depending on the outcome of a ballgame, as decided by a third party oracle.</p>
                    `,
                    desc: `Learn how bitcoin script works and write your first bitcoin smart contract: a ballgame contract where Alice and Bob send one another a conditional payment that only goes through depending on the outcome of a ballgame, as decided by a third party oracle.`,
                    ticket: "https://shopstr.store/listing/ec99989d0af62f7dc385afd1eb1dde4cc1c3a0c14007f9772509603062df3008",
                    past: "./workshops.html?option=bitcoin_script",
                    upcoming_image: "https://i.ibb.co/H40tNZB/arms-raised.png",
                    sales_image: "https://i.ibb.co/qD4Bdz4/learn-btc-script-image.png",
                },
                nostr: {
                    title: "Nostr workshop",
                    paid_img: 'https://i3.ytimg.com/vi/xnkgvaCgLTQ/hqdefault.jpg',
                    free_img: 'https://i.ibb.co/H40tNZB/arms-raised.png',
                    paid_url: 'https://shopstr.store/listing/7db27c57ae228c3302612b09027c0e4aaf603ad8d8e5a439d23193a48af74a81',
                    free_url: 'https://www.youtube.com/watch?v=rjuPvZ6aadg',
                    price: 5,
                    html_desc: `
                        <p>Learn how to write your first application using the nostr message protocol, and use Nostr Wallet Connect (NWC) and zaps to make your app send/receive money.</p>
                    `,
                    desc: `Learn how to write your first application using the nostr message protocol.`,
                    ticket: "https://shopstr.store/listing/ec99989d0af62f7dc385afd1eb1dde4cc1c3a0c14007f9772509603062df3008",
                    past: "./workshops.html?option=nostr",
                    upcoming_image: "https://i.ibb.co/H40tNZB/arms-raised.png",
                    sales_image: "https://i3.ytimg.com/vi/HbicnlCXg_Y/hqdefault.jpg",
                },
                cashu: {
                    title: "Cashu workshop",
                    paid_img: 'https://i3.ytimg.com/vi/xnkgvaCgLTQ/hqdefault.jpg',
                    free_img: 'https://i.ibb.co/H40tNZB/arms-raised.png',
                    paid_url: 'https://shopstr.store/listing/f92e9597c470f34f6332dc29e96c739a048988c599a87e0e3f27960b9a01ebdd',
                    free_url: 'https://www.youtube.com/watch?v=xfYmwc-gnK8',
                    price: 5,
                    html_desc: `
                        <p>Learn how chaumian ecash works and create a toy implementation of a cashu enabled wallet.</p>
                    `,
                    desc: `Learn how chaumian ecash works and create a toy implementation of a cashu enabled wallet.`,
                    ticket: "https://shopstr.store/listing/ec99989d0af62f7dc385afd1eb1dde4cc1c3a0c14007f9772509603062df3008",
                    past: "./workshops.html?option=cashu",
                    upcoming_image: "https://i.ibb.co/H40tNZB/arms-raised.png",
                    sales_image: "https://i.ibb.co/VwM2q8m/cashu-workshop-thumbnail.jpg",
                },
                bisq: {
                    title: "Bisq workshop",
                    paid_img: 'https://i3.ytimg.com/vi/xnkgvaCgLTQ/hqdefault.jpg',
                    free_img: 'https://i.ibb.co/H40tNZB/arms-raised.png',
                    paid_url: 'https://shopstr.store/listing/4f84a8664e9b23ac4006e62b872b2e12fe823f4c51fff39e4a9617bb88a390fa',
                    free_url: 'https://www.youtube.com/watch?v=kqbpT4JjqDo',
                    price: 5,
                    html_desc: `
                        <p>Learn how privately and securely Bisq's peer-to-peer network and open-source desktop software operates, and actually use it to make your first KYC free bitcoin purchase.</p>
                    `,
                    desc: `Learn how privately and securely Bisq's peer-to-peer network and open-source desktop software operates, and actually use it to make your first KYC free bitcoin purchase.`,
                    ticket: "https://shopstr.store/listing/ec99989d0af62f7dc385afd1eb1dde4cc1c3a0c14007f9772509603062df3008",
                    past: "./workshops.html?option=bisq",
                    upcoming_image: "https://i.ibb.co/H40tNZB/arms-raised.png",
                    sales_image: "https://i3.ytimg.com/vi/kqbpT4JjqDo/hqdefault.jpg",
                },
                bitvm: {
                    title: "Bitvm workshop (build Tic Tac Toe)",
                    paid_img: 'https://i3.ytimg.com/vi/xnkgvaCgLTQ/hqdefault.jpg',
                    free_img: 'https://i.ibb.co/H40tNZB/arms-raised.png',
                    paid_url: 'https://shopstr.store/listing/73f958cec434f3af47c2dd0838110aab442e5df47c72b9cc2e7d8b503aa7522c',
                    free_url: 'https://www.youtube.com/watch?v=LwH9fhY4uGA',
                    price: 5,
                    html_desc: `
                        <p>Learn how to write software for bitvm by building an implementation and running Tic Tac Toe in it.</p>
                    `,
                    desc: `Learn how to write software for bitvm by building an implementation and running Tic Tac Toe in it.`,
                    ticket: "https://shopstr.store/listing/ec99989d0af62f7dc385afd1eb1dde4cc1c3a0c14007f9772509603062df3008",
                    past: "./workshops.html?option=bitvm",
                    upcoming_image: "https://i.ibb.co/H40tNZB/arms-raised.png",
                    sales_image: "https://i.ibb.co/yRXgg6j/bitvm-workshop-image.png",
                },
                lnbits: {
                    title: "LNBits workshop",
                    paid_img: 'https://i3.ytimg.com/vi/xnkgvaCgLTQ/hqdefault.jpg',
                    free_img: 'https://i.ibb.co/H40tNZB/arms-raised.png',
                    paid_url: 'https://shopstr.store/listing/b4705e170f3cbd4e7380ddd6cea089f0274dd0233445cb0af8fbd793f319a2d2',
                    free_url: 'https://www.youtube.com/watch?v=RraYvLeqXAw',
                    price: 5,
                    html_desc: `
                        <p>Learn how to install LNBits, how to connect it to a funding source, and how extensions work.</p>
                    `,
                    desc: `Learn how to install LNBits, how to connect it to a funding source, and how extensions work.`,
                    ticket: "https://shopstr.store/listing/ec99989d0af62f7dc385afd1eb1dde4cc1c3a0c14007f9772509603062df3008",
                    past: "./workshops.html?option=lnbits",
                    upcoming_image: "https://i.ibb.co/H40tNZB/arms-raised.png",
                    sales_image: "https://i3.ytimg.com/vi/RraYvLeqXAw/hqdefault.jpg",
                },
                coinjoin: {
                    title: "Coinjoin workshop (aka Building Emessbee)",
                    paid_img: 'https://i3.ytimg.com/vi/xnkgvaCgLTQ/hqdefault.jpg',
                    free_img: 'https://i.ibb.co/H40tNZB/arms-raised.png',
                    paid_url: 'https://shopstr.store/listing/8f0c0243c6d9b0f1202bbebc60283aae7d35f12b059461ec00229300b1fd2222',
                    free_url: 'https://www.youtube.com/watch?v=MT0CfuH7upE',
                    price: 5,
                    html_desc: `
                        <p>Learn how to write coinjoin software utilizing Super Testnet's Emessbee protocol, where coinjoins happen without the help of a coordinator.</p>
                    `,
                    desc: `Learn how to write coinjoin software utilizing Super Testnet's Emessbee protocol, where coinjoins happen without the help of a coordinator.`,
                    ticket: "https://shopstr.store/listing/ec99989d0af62f7dc385afd1eb1dde4cc1c3a0c14007f9772509603062df3008",
                    past: "./workshops.html?option=coinjoin",
                    upcoming_image: "https://i.ibb.co/H40tNZB/arms-raised.png",
                    sales_image: "https://supertestnet.github.io/coinjoin-workshop/emessbee-demo-with-yt-logo.jpg",
                },
            }
            var schedule = {
                June: workshops[ "bitcoin_script" ],
                July: workshops[ "nostr" ],
                August: workshops[ "cashu" ],
                September: workshops[ "bisq" ],
                October: workshops[ "bitvm" ],
                November: workshops[ "lnbits" ],
                December: workshops[ "coinjoin" ],
            }
        </script>
        <title>Workshops</title>
        <style>
            * {
                box-sizing: border-box;
                font-size: 1.15rem;
                font-family: Arial, sans-serif;
            }
            html {
                max-width: 800px;
                padding: 3rem 1rem;
                margin: auto;
                line-height: 1.25;
                padding: 0;
            }
            body {
                margin: 3rem 1rem;
            }
            h1 {
                font-size: 2rem;
            }
            h2 {
                font-size: 1.5rem;
            }
            input {
                line-height: 1.25;
                width: 100%;
                height: 1.8rem;
                font-size: 1.15rem;
                border: 1px solid grey;
            }
            .hidden {
                display: none;
            }
            .upcoming_box, .upcoming_image_box {
                width: 100%;
                max-width: 700px;
                padding: 10px;
                border: 1px solid black;
                border-radius: 10px;
            }
            .upcoming_image_box {
                float: right;
                max-width: 210px;
            }
            .upcoming_image {
                width: 100%;
                max-width: 200px;
                float: right;
            }
            .buyboxes, .all_div {
                text-align: center;
            }
            .buybox, .learnbox {
                display: inline-block;
                vertical-align: top;
                width: 100%;
                max-width: 15rem;
                border: 1px solid black;
                border-radius: 1rem;
                padding: 1rem;
                margin: .5rem;
            }
            .option_pic {
                width: 100%;
                background-size: cover;
                background-position: 50% 50%;
            }
            .option_desc_label, .option_title {
                font-weight: bold;
                margin: .4rem;
            }
            .option_desc {
                margin: .4rem;
            }
            @media screen and (max-width: 600px) {
                .upcoming_box, .upcoming_image_box, .upcoming_image {
                    float: none;
                    max-width: none;
                }
            }
        </style>
        <script>
            var $ = document.querySelector.bind( document );
            var $$ = document.querySelectorAll.bind( document );
            var url_params = new URLSearchParams( window.location.search );
            var url_keys = url_params.keys();
            var $_GET = {}
            for ( var key of url_keys ) $_GET[ key ] = url_params.get( key );
        </script>
    </head>
    <body>
        <div class="upcoming">
            <h1>Upcoming workshop</h1>
            <div class="upcoming_box">
                <div class="upcoming_image_box"><img class="upcoming_image"></div>
                <p>Topic: <span class="what"></span></p>
                <p>When: <span class="when"></span></p>
                <p>Format: <span class="format">Live streamed via Jitsi video streaming platform (or possibly Zoom)</span></p>
                <p>Cost: <span class="cost">$20.00</span></p>
                <p>Description: <span class="desc"></span></p>
                <p><a class="buy_ticket" target="_blank"><button>Buy a ticket</button></a> <a class="buy_video" target="_blank"><button>Buy a past recording</button></a></p>
            </div>
            <h1>All upcoming workshops</h1>
            <div class="all_div"></div>
        </div>
        <h1 class="title"></h1>
        <div class="desc_div"></div>
        <div class="upcoming_info hidden">
            <p>This workshop will be presented live on <span class="alt_when"></span></p>
            <p><a class="alt_buy_ticket" target="_blank"><button>Buy a ticket</button></a></p>
        </div>
        <h2>Two options</h2>
        <div class="buyboxes">
            <div class="buybox">
                <div class="option_title">
                    Paid version
                </div>
                <div class="option_pic"></div>
                <div class="option_desc_label">Description</div>
                <div class="option_desc">
                    The exact same thing as the free version except this way you're supporting me monetarily
                </div>
                <div class="option_button">
                    <a target="_blank"><button>$20.00</button></a>
                </div>
            </div>
            <div class="buybox">
                <div class="option_title">
                    Free version
                </div>
                <div class="option_pic"></div>
                <div class="option_desc_label">Description</div>
                <div class="option_desc">
                    The exact same thing as the paid version except this way you get it for no cost at all
                </div>
                <div class="option_button">
                    <button onclick="showFree();">Free</button>
                </div>
            </div>
        </div>
        <script>
            //UPCOMING WORKSHOPS
            var months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
            var current_month = months[ ( new Date ).getMonth() ];
            var next_month = months[ ( new Date ).getMonth() + 1 ];
            if ( !next_month ) next_month = "January";
            var current_day = ( new Date ).getDate();
            if ( current_day < 25 ) var month = current_month;
            else var month = next_month;
            //var date_of_next_workshop = `${month} 25 at 7:00 pm New York City time`;
            var date_of_next_workshop = `to be determined`;
            $( '.upcoming_image' ).src = schedule[ month ][ "upcoming_image" ];
            $( '.what' ).innerText = schedule[ month ][ "title" ];
            $( '.when' ).innerText = date_of_next_workshop;
            $( '.desc' ).innerText = schedule[ month ][ "desc" ];
            $( '.buy_ticket' ).href = schedule[ month ][ "ticket" ];
            $( '.buy_video' ).href = schedule[ month ][ "past" ];

            //ALL UPCOMING WORKSHOPS
            Object.keys( workshops ).forEach( workshop => {
                if ( workshop === "all" ) return;
                var learnbox_html = `
                    <div class="option_title"></div>
                    <div class="option_pic"></div>
                    <div class="option_desc_label">Description</div>
                    <div class="option_desc"></div>
                    <div class="option_button">
                        <a target="_blank"><button>Learn more</button></a>
                    </div>
                `;
                var learnbox = document.createElement( "div" );
                learnbox.classList.add( "learnbox" );
                learnbox.innerHTML = learnbox_html;
                learnbox.getElementsByClassName( "option_title" )[ 0 ].innerText = workshops[ workshop ][ "title" ];
                learnbox.getElementsByClassName( "option_pic" )[ 0 ].style.backgroundImage = `url( '${workshops[ workshop ][ "sales_image" ]}' )`;
                var lildesc = workshops[ workshop ][ "desc" ].substring( 0, 60 );
                if ( lildesc.endsWith( " " ) ) lildesc = workshops[ workshop ][ "desc" ].substring( 0, 59 );
                lildesc = lildesc + "...";
                learnbox.getElementsByClassName( "option_desc" )[ 0 ].innerText = lildesc;
                learnbox.getElementsByTagName( "a" )[ 0 ].href = workshops[ workshop ][ "past" ];
                $( '.all_div' ).append( learnbox );
            });

            //PAST WORKSHOPS
            var option = "all";
            if ( $_GET[ "option" ] ) option = $_GET[ "option" ];
            if ( !( option in workshops ) ) option = "all";
            $$( '.option_pic' ).forEach( item => {
                item.style.height = String( item.offsetWidth * 9 / 16 ) + "px";
            });
            if ( $_GET[ "option" ] ) {
                $( 'title' ).innerText = workshops[ option ][ "title" ];
                $( '.upcoming' ).remove();
                $( 'h2' ).innerText = "Buy a past recording";
                if ( schedule[ month ][ "title" ] === workshops[ option ][ "title" ] ) {
                    $( '.upcoming_info' ).classList.remove( "hidden" );
                    $( '.alt_when' ).innerText = date_of_next_workshop;
                    $( '.alt_buy_ticket' ).href = schedule[ month ][ "ticket" ];
                    $( 'h2' ).innerText = "Or buy a past recording";
                }
            }
            $( '.title' ).innerText = workshops[ option ][ "title" ];
            $( '.desc_div' ).innerHTML = workshops[ option ][ "html_desc" ];
            $$( '.buybox' ).forEach( ( item, index ) => {
                var img = workshops[ option ][ "paid_img" ];
                if ( index ) img = workshops[ option ][ "free_img" ];
                item.getElementsByClassName( "option_pic" )[ 0 ].style.backgroundImage = `url( '${img}' )`;
                var url = workshops[ option ][ "paid_url" ];
                if ( !index ) item.getElementsByClassName( "option_button" )[ 0 ].getElementsByTagName( "a" )[ 0 ].href = url;
                var price = workshops[ option ][ "price" ].toFixed( 2 );
                if ( !index ) item.getElementsByClassName( "option_button" )[ 0 ].getElementsByTagName( "button" )[ 0 ].innerText = `$${price}`;
            });
            var showFree = () => {
                if ( $( '.upcoming' ) ) $( '.upcoming' ).remove();
                $( '.desc_div' ).remove();
                $( '.upcoming_info' ).remove();
                $( 'h2' ).remove();
                $( '.buyboxes' ).innerHTML = `
                    <p><a href="${workshops[ option ][ "free_url" ]}" target="_blank">Here you go</a></p><p>Please support me monetarily some other time</p>
                `;
            }
        </script>
    </body>
</html>
